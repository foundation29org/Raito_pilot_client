<div class="mt-4 card card-block mx-auto" *ngIf="!loadedInfoPatient" style="max-width: 30rem !important;">
    <div class="card-body">
        <div class="row">
            <div class="col-lg-12 center-elements">
                <div>
                    <i class="fa fa-spinner fa-spin fa-fw"></i>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="mt-4 card card-block mx-auto" *ngIf="loadedInfoPatient && (basicInfoPatient.group==null || step!='0')"
    style="max-width: 30rem !important;">
    <div class="card-body">
        <div class="row">
            <div class="col-lg-12 ">
                <div *ngIf="!loadedInfoPatient">
                    <i class="fa fa-spinner fa-spin fa-fw"></i>
                </div>
                <div *ngIf="loadedInfoPatient">
                    <div *ngIf="basicInfoPatient.group==null || step!='0'"
                        class="justify-content-center align-items-center text-center">
                        <div *ngIf="step=='0'">
                            <h2>{{'homeraito.t1' | translate }}</h2>
                            <div class="center-elements">
                                <button class="mr-1 btn btn-primary" (click)="question1('No');">{{'generics.No' |
                                    translate }}</button>
                                <button class="ml-1 btn btn-primary" (click)="question1('Yes');">{{'generics.Yes' |
                                    translate }}</button>
                            </div>
                        </div>
                        <div *ngIf="step=='1'">
                            <h2>{{'homeraito.t2' | translate }}</h2>
                            <select id="group" name="group" class="form-control" ngModel
                                [(ngModel)]="basicInfoPatient.group">
                                <option [value]="null" disabled selected>--{{'registration.Please select a
                                    group' | translate }}--</option>
                                <option *ngFor="let group of groups" [ngValue]="group._id">
                                    <span *ngIf="group.name == duchennenetherlands">Duchenne Parent Project
                                        Netherlands</span>
                                    <span *ngIf="group.name == 'Stop Sanfilippo'">Stop Sanfilippo</span>
                                    <span *ngIf="group.name == 'Dravet Syndrome European Federation'">{{'personalinfo.Patients with
                                        epilepsy' | translate }}</span>
                                    <span
                                        *ngIf="group.name != 'Stop Sanfilippo' && group.name != 'Dravet Syndrome European Federation'  && group.name != 'Undiagnosed'  && group.name != 'None' && group.name != duchennenetherlands">{{group.name}}</span>
                                    <span *ngIf="group.name == 'Undiagnosed'">{{'personalinfo.I dont have a
                                        diagnosis' | translate }}</span>
                                    <span *ngIf="group.name == 'None'">{{'personalinfo.I dont belong to a
                                        patient group' | translate }}</span>
                                </option>
                            </select>
                            <div class="center-elements">
                                <button class="mt-3 btn btn-dark mr-1"
                                    (click)="step='0'">{{'generics.Previous' | translate }}</button>
                                <button class="mt-3 btn btn-primary ml-1" [disabled]="basicInfoPatient.group==null"
                                    (click)="question2();">{{'generics.Next' | translate }}</button>
                            </div>
                        </div>
                        <div *ngIf="step=='2'">
                            <h2>{{'homeraito.t3' | translate }}</h2>
                            <p class="text-muted">
                                {{'homeraito.p1' | translate }}
                            </p>
                            <p class="text-muted mt-2">{{'homeraito.p1.1' | translate }}</p>
                            
                            <div class="center-elements mt-1">
                                <button class="mr-1 btn btn-primary" style="width: 100px;" (click)="question3(false);">{{'generics.No' |
                                    translate }}</button>
                                <button class="ml-1 btn btn-primary" style="width: 100px;" (click)="question3(true);">{{'generics.Yes' |
                                    translate }}</button>
                            </div>
                            <div class="center-elements">
                                <button class="mt-3 mb-0 btn btn-dark"
                                    (click)="step='1'">{{'generics.Previous' | translate }}</button>
                            </div>
                        </div>
                        <div *ngIf="step=='3'">
                            <h2 *ngIf="basicInfoPatient.consentgroup">{{'homeraito.p2' | translate }}</h2>
                            <p *ngIf="!basicInfoPatient.consentgroup">{{'homeraito.p2.1' | translate }}</p>
                            <div class="center-elements">
                                <button class="btn btn-dark mr-1"
                                    (click)="step='2'">{{'generics.Previous' | translate }}</button>
                                <button class="btn btn-primary ml-1" (click)="goStep('0')">{{'wizard.btn' | translate
                                    }}</button>
                            </div>
                        </div>
                        <div *ngIf="step=='4'">
                            <p>{{'homeraito.t1.1' | translate }}</p>
                            <div class="center-elements">
                                <button class="btn btn-dark mr-1"
                                    (click)="step='0'">{{'generics.Previous' | translate }}</button>
                                <button class="btn btn-primary ml-1" (click)="goStep('0');setPatientGroup('None');">{{'wizard.btn' | translate
                                    }}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="" *ngIf="loadedInfoPatient && basicInfoPatient.group!=null && step=='0'">
    <div class="mx-auto" style="max-width: 30rem !important;" *ngIf="tasksLoaded">
        <div class="card">
            <div class="card-block">
                <div class="pl-2 pr-2 pt-2">
                    <h4 class="text-bold-500">{{'topnavbar.Notifications' | translate }}</h4>
                </div>
                <div *ngIf="!infoVerified.isVerified && loadVerifiedInfo" id='veriff-root'></div>
                <div class="pl-2 pr-2 pb-2" style="line-height: 1.2em;">
                    <!--One notification-->
                    <div class="row font-small-3 mb-1" *ngIf="!checks.check1">
                        <div class="col-1 pr-0">
                            <em class="fas fa-info-circle"></em>
                        </div>
                        <div class="col-7 pl-2 pr-0">
                            <p class="">{{'charts.noti1a' | translate }}</p>
                        </div>
                        <div class="col-4">
                            <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" (click)="setCheck1(true)">
                                <span class="">
                                    Ok
                                </span>
                              </a>
                        </div>
                    </div>
                    <div class="row font-small-3 mb-1" *ngIf="!checks.check2">
                        <div class="col-1 pr-0">
                            <em class="fas fa-info-circle"></em>
                        </div>
                        <div class="col-7 pl-2 pr-0">
                            <p class="">{{'charts.noti2a' | translate }}</p>
                        </div>
                        <div class="col-4">
                            <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" (click)="setCheck2(true)">
                                <span class="">
                                    Ok
                                </span>
                              </a>
                        </div>
                    </div>
                    <div class="row font-small-3 mb-1" *ngIf="!infoVerified.isVerified && infoVerified.status=='Not started'">
                        <div class="col-1 pr-0">
                            <em class="fas fa-info-circle"></em>
                        </div>
                        <div class="col-7 pl-2 pr-0">
                            <p class="">{{'identity.t2' | translate }}</p>
                        </div>
                        <div class="col-4">
                            <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" (click)="getUserInfo(true)">
                                <span class="">
                                    {{'identity.t0' | translate }}
                                </span>
                              </a>
                        </div>
                    </div>
                    <div class="row font-small-3 mb-1" *ngIf="!infoVerified.isVerified && infoVerified.status!='Not started'">
                        <div class="col-1 pr-0">
                            <em class="fas fa-info-circle"></em>
                        </div>
                        <div class="col-7 pl-2 pr-0" *ngIf="infoVerified.status =='created' || infoVerified.status =='submitted'">
                            <p>{{'identity.t7' | translate }}</p>
                            <p>{{'identity.t8' | translate }}</p>
                            <p>{{'identity.t9' | translate }} <a class="info" (click)="getUserInfo(true)">{{'identity.click here' | translate }}</a> {{'identity.t10' | translate }}</p>
                        </div>
                        <div class="col-7 pl-2 pr-0" *ngIf="infoVerified.status =='resubmission_requested'">
                            <p>{{'identity.t5' | translate }}</p>
                            <p>{{'identity.t9' | translate }} <a class="info" (click)="getUserInfo(true)">{{'identity.click here' | translate }}</a> {{'identity.t10' | translate }}</p>
                        </div>
                        <div class="col-7 pl-2 pr-0" *ngIf="infoVerified.status =='declined'">
                            <p>{{'identity.t11' | translate }}</p>
                            <p>{{'identity.t12' | translate }}: {{infoVerified.info.value}}</p>
                            <p>{{'identity.t13' | translate }}</p>
                        </div>
                        <div class="col-4">
                            <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" (click)="getUserInfo(true)" *ngIf="infoVerified.status =='created' || infoVerified.status =='submitted'">
                                <span class="">
                                    {{'identity.t0.1' | translate }}
                                </span>
                              </a>
                        </div>
                    </div>
                    <div class="row font-small-3 mb-1" *ngIf="(basicInfoPatient.group=='None' || basicInfoPatient.group==null) && !checks.check3">
                        <div class="col-1 pr-0">
                            <em class="fas fa-info-circle"></em>
                        </div>
                        <div class="col-7 pl-2 pr-0">
                            <p class="">{{'charts.noti6a' | translate }}</p>
                        </div>
                        <div class="col-4">
                            <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" (click)="setCheck3(true)">
                                <span class="">
                                    Ok
                                </span>
                              </a>
                        </div>
                    </div>
                    <div class="row font-small-3 mb-1" *ngIf="!basicInfoPatient.consentgroup">
                        <div class="col-1 pr-0">
                            <em class="fas fa-info-circle"></em>
                        </div>
                        <div class="col-7 pl-2 pr-0">
                            <p class="">{{'charts.noti7a' | translate }}</p>
                        </div>
                        <div class="col-4">
                            <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" (click)="setCheck4(true)">
                                <span class="">
                                    Ok
                                </span>
                              </a>
                        </div>
                    </div>
                    <div *ngIf="checks.check1 && checks.check2">
                        <div class="row font-small-3 mb-1" *ngIf="(events.length == 0 || showNotiSeizu)&& loadedEvents">
                            <div class="col-1 pr-0">
                                <em class="fas fa-bolt"></em>
                            </div>
                            <div class="col-7 pl-2 pr-0">
                                <p class="" *ngIf="events.length == 0">{{'charts.noti4a' | translate }}</p>
                                <p class="" *ngIf="events.length > 0">{{'charts.noti4b' | translate }}</p>
                            </div>
                            <div class="col-4">
                                <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" routerLink="/seizures">
                                    <span class="">
                                        {{'charts.Answer' | translate }}
                                    </span>
                                  </a>
                            </div>
                        </div>
                        <div class="row font-small-3 mb-1" *ngIf="(medications.length == 0 || showNotiDrugs) && loadedDrugs">
                            <div class="col-1 pr-0">
                                <em class="fas fa-capsules"></em>
                            </div>
                            <div class="col-7 pl-2 pr-0">
                                <p class="" *ngIf="medications.length == 0">{{'charts.noti5a' | translate }}</p>
                                <p class="" *ngIf="medications.length > 0">{{'charts.noti5b' | translate }}</p>
                            </div>
                            <div class="col-4">
                                <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" routerLink="/medication">
                                    <span class="">
                                        {{'charts.Answer' | translate }}
                                    </span>
                                  </a>
                            </div>
                        </div>
                        <div class="row font-small-3 mb-1" *ngIf="events.length > 0 && medications.length > 0 && (feels.length == 0 || showNotiFeel) && loadedFeels">
                            <div class="col-1 pr-0">
                                <em class="ft-heart"></em>
                            </div>
                            <div class="col-7 pl-2 pr-0">
                                <p class="" *ngIf="feels.length == 0">{{'charts.noti3a' | translate }}</p>
                                <p class="" *ngIf="feels.length > 0">{{'charts.noti3b' | translate }}</p>
                            </div>
                            <div class="col-4">
                                <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" routerLink="/feel">
                                    <span class="">
                                        {{'charts.Answer' | translate }}
                                    </span>
                                  </a>
                            </div>
                        </div>
                        <div class="row font-small-3" *ngIf="totalTaks>0 && tasksLoaded">
                            <div class="col-1 pr-0">
                                <em class="ft-bell"></em>
                            </div>
                            <div class="col-7 pl-2 pr-0">
                                <p class="mb-0">{{'prom.You have datapoints to complete' | translate }}</p>
                            </div>
                            <div class="col-4">
                                <a class="btn btn-white btn-sm w-100" style="word-wrap: normal;" [routerLink]="['/prom', { pendind: true}]">
                                    <span class="">
                                        {{'charts.Answer' | translate }}
                                    </span>
                                  </a>
                            </div>
                        </div>
                        <div class="row font-small-3" *ngIf="totalTaks==0 && tasksLoaded && events.length > 0 && medications.length > 0 && feels.length > 0">
                            <div class="col-7">
                                <p class="mb-0">{{'topnavbar.There are no notifications to show' | translate }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="mx-auto" style="max-width: 30rem !important;">
        <div class="card">
            <div class="card-block">
                <div class="pl-2 pr-2 pt-2">
                    <h4 class="text-bold-500">{{'charts.Your progress' | translate }}</h4>
                </div>
                <div class="pl-2 pr-2 pb-2">
                    <span>{{'charts.If you dont keep data updated it will decrease' | translate }}</span>
                    <ngb-progressbar type="dark" height="2rem" [value]="valueprogressbar"><b>{{valueprogressbar}}%</b></ngb-progressbar>
                </div>
            </div>
        </div>
    </div>

    <div class="mx-auto card" style="max-width: 30rem !important;">
        <div class="row">
            <div class="col-sm-12 content-header">
                <span class="optionsCharts">
                    <span><button class="mb-0 btn btn-sm btn-white round mr-1" [disabled]="rangeDate=='month'"
                            (click)="loadDataRangeDate('month');">{{'charts.Last month' |
                            translate }}</button></span>
                    <span><button class="mb-0 btn btn-sm btn-white round mr-1" [disabled]="rangeDate=='quarter'"
                            (click)="loadDataRangeDate('quarter');">{{'charts.Last quarter' |
                            translate }}</button></span>
                    <span><button class="mb-0 btn btn-sm btn-white round mr-1" [disabled]="rangeDate=='year'"
                            (click)="loadDataRangeDate('year');">{{'charts.Last year' |
                            translate }}</button></span>
                </span>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 ">
                <div *ngIf="!loadedInfoPatient">
                    <i class="fa fa-spinner fa-spin fa-fw"></i>
                </div>
                <div>
                    <div class="row" *ngIf="events.length > 0 && loadedEvents">
                        <div class="col-sm-12">
                            <div class="card mb-2 mt-2">
                                <div class="mb-2">
                                    <div class="card-block">
                                        <div class="row p-2">
                                            <div class="col-8">
                                                <h4 class="text-bold-500">{{'menu.Seizures' | translate }}
                                                    <em class="ft-info font-medium-1" style="cursor: pointer;" placement="down" #p1="ngbPopover" [ngbPopover]="popContentseizures" popoverTitle="{{'charts.infoTitle' | translate }}"></em>
                                                    <ng-template #popContentseizures>
                                                        <span>
                                                            {{'charts.infoSeizures' | translate }}
                                                        </span>
                                                        <button class="d-block" style="margin-top: 1em;margin-bottom: 1em;" (click)="p1.close()">Close</button>
                                                      </ng-template>
                                                </h4>
                                            </div>
                                            <div class="col-4">
                                                <a routerLink="/seizures" class="text-bold-500 float-right btn btn-primary btn-sm font-small-3 danger"
                                                title="{{'homeraito.p5' | translate }}">
                                                <span class="menu-title">+</span>
                                            </a>
                                            </div>
                                        </div>
                                        <div id="line-chart2" class="height-100">
                                            <ngx-charts-line-chart [scheme]="lineChartColorScheme"
                                                [results]="lineChartSeizures" [gradient]="barChartGradient"
                                                [xAxis]="false" [yAxis]="true" [yAxisTickFormatting]='axisFormat'
                                                [legend]="barChartShowLegend" [showXAxisLabel]="false"
                                                [showYAxisLabel]="false" [xAxisLabel]="barChartXAxisLabel"
                                                [yAxisLabel]="barChartYAxisLabel" [yAxisTicks]="yAxisTicksSeizures" (select)="onSelect($event)" >
                                                <ng-template #tooltipTemplate let-model="model">
                                                    <span>{{ model.name }}: {{ model.value }}</span>
                                                    <span class="d-block"
                                                        *ngFor="let type of model.types ; let i = index">
                                                        {{type.type}}: {{type.count}}
                                                    </span>
                                                </ng-template>
                                                <ng-template #seriesTooltipTemplate let-model="model">
                                                    <div *ngFor="let mod of model; let i = index">
                                                        <span class="d-block">{{ mod.name}}: {{ mod.value
                                                            }}</span>
                                                        <span class="d-block"
                                                            *ngFor="let type of mod.types ; let j = index">
                                                            {{type.type}}: {{type.count}}
                                                        </span>
                                                    </div>
                                                </ng-template>
                                            </ngx-charts-line-chart>
                                            
                                        </div>
                                        <div *ngIf="rangeDate=='month'" class="center-elements col-12" style="position: absolute;top: 90%;">
                                            <span class="float-left font-small-3">{{xAxisTicks[0] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                            <span class="d-none d-sm-inline font-small-3">{{xAxisTicks[1] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                            <span class="float-right font-small-3">{{xAxisTicks[2] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                        </div>
                                        <div *ngIf="rangeDate!='month'" class="center-elements col-12">
                                            <span class="float-left font-small-3">{{xAxisTicks[0] | date: 'MMM y': '' : translate.currentLang}}</span>
                                            <span class="d-none d-sm-inline font-small-3">{{xAxisTicks[1] | date: 'MMM y': '' : translate.currentLang}}</span>
                                            <span class="float-right font-small-3">{{xAxisTicks[2] | date: 'MMM y': '' : translate.currentLang}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="events.length == 0 && loadedEvents">
                        <div class="col-sm-12">
                            <div class="card mb-2 mt-2">
                                <div class="">
                                    <div class="card-block">
                                        <div class="row p-2">
                                            <div class="col-10">
                                                <h4 class="text-bold-500 mb-0">{{'menu.Seizures' | translate }}
                                                    <em class="ft-info font-medium-1" style="cursor: pointer;" placement="down" #p1="ngbPopover" [ngbPopover]="popContentseizures" popoverTitle="{{'charts.infoTitle' | translate }}"></em>
                                                    <ng-template #popContentseizures>
                                                        <span>
                                                            {{'charts.infoSeizures' | translate }}
                                                        </span>
                                                        <button class="d-block" style="margin-top: 1em;margin-bottom: 1em;" (click)="p1.close()">Close</button>
                                                      </ng-template>
                                                </h4>
                                                <p class="mb-0">{{'charts.Noseizures' | translate }}
                                                    <span *ngIf="rangeDate!=''">
                                                        {{'charts.in the last' | translate }}
                                                        <span *ngIf="rangeDate=='month'">{{'charts.month' |
                                                            translate }}</span>
                                                        <span *ngIf="rangeDate=='quarter'">{{'charts.quarter' |
                                                            translate }}</span>
                                                        <span *ngIf="rangeDate=='year'">{{'charts.year' | translate
                                                            }}</span>
                                                    </span>
                                                </p>
                                            </div>
                                            <div class="col-2">
                                                <a routerLink="/seizures" class="text-bold-500 float-right btn btn-primary btn-sm font-small-3 danger"
                                                title="{{'homeraito.p5' | translate }}">
                                                <span class="menu-title">+</span>
                                            </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="feels.length > 0">
                        <div class="col-sm-12">
                            <div class="card mb-2 mt-2">
                                <div class="mb-2">
                                    <div class="card-block">
                                        <div class="row p-2">
                                            <div class="col-8">
                                                <h4 class="text-bold-500">{{'charts.Quality of life' | translate }}
                                                    <em class="ft-info font-medium-1" style="cursor: pointer;" placement="down" #p1="ngbPopover" [ngbPopover]="popContentfeel" popoverTitle="{{'charts.infoTitle' | translate }}"></em>
                                                    <ng-template #popContentfeel>
                                                        <span>
                                                            {{'charts.infoFeel' | translate }}
                                                        </span>
                                                        <button class="d-block" style="margin-top: 1em;margin-bottom: 1em;" (click)="p1.close()">Close</button>
                                                      </ng-template>
                                                </h4>
                                            </div>
                                            <div class="col-4">
                                                <a routerLink="/feel" class="text-bold-500 float-right btn btn-primary btn-sm font-small-3 danger"
                                                title="{{'charts.I want to answer how I feel today' | translate }}">
                                                <span class="menu-title">+</span>
                                            </a>
                                            </div>
                                        </div>
                                        <div id="line-chart2" class="height-100">
                                            <ngx-charts-bar-vertical-2d [scheme]="lineChartColorScheme"
                                                [results]="lineChartHeight" [gradient]="barChartGradient"
                                                [xAxis]="false" [yAxis]="true"
                                                [legend]="barChartShowLegend"
                                                [showXAxisLabel]="false"
                                                [xAxisTickFormatting]="tickFormatting"
                                                [showYAxisLabel]="false" [xAxisLabel]=""
                                                [autoScale]="false" [showText]="false" (select)="onSelect($event)"
                                                [yAxisTicks]=[0,5] [yScaleMax]="5"
                                                [yAxisTickFormatting]="axisFormat">
                                                <ng-template #tooltipTemplate let-model="model">
                                                    <span class="d-block">{{ model.name |date }}</span>
                                                    <span *ngIf="model.value==5">{{'charts.Very happy' | translate
                                                        }}</span>
                                                    <span *ngIf="model.value==4">{{'charts.Happy' | translate
                                                        }}</span>
                                                    <span *ngIf="model.value==3">Normal</span>
                                                    <span *ngIf="model.value==2">{{'charts.Sad' | translate
                                                        }}</span>
                                                    <span *ngIf="model.value==1">{{'charts.Very sad' | translate
                                                        }}</span>
                                                </ng-template>
                                                <ng-template #seriesTooltipTemplate let-model="model">
                                                    <div *ngFor="let mod of model; let i = index">
                                                        <span class="d-block">{{ mod.name |date }}</span>
                                                        <span *ngIf="mod.value==5">{{'charts.Very happy' | translate
                                                            }}</span>
                                                        <span *ngIf="mod.value==4">{{'charts.Happy' | translate
                                                            }}</span>
                                                        <span *ngIf="mod.value==3">Normal</span>
                                                        <span *ngIf="mod.value==2">{{'charts.Sad' | translate
                                                            }}</span>
                                                        <span *ngIf="mod.value==1">{{'charts.Very sad' | translate
                                                            }}</span>
                                                    </div>
                                                </ng-template>
                                            </ngx-charts-bar-vertical-2d>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="feels.length == 0 && loadedFeels">
                        <div class="col-sm-12">
                            <div class="card mb-2 mt-2">
                                <div class="">
                                    <div class="card-block">
                                        <div class="row p-2">
                                            <div class="col-10">
                                                <h4 class="text-bold-500 mb-0">{{'charts.Quality of life' |translate }}
                                                    <em class="ft-info font-medium-1" style="cursor: pointer;" placement="down" #p1="ngbPopover" [ngbPopover]="popContentfeel" popoverTitle="{{'charts.infoTitle' | translate }}"></em>
                                                    <ng-template #popContentfeel>
                                                        <span>
                                                            {{'charts.infoFeel' | translate }}
                                                        </span>
                                                        <button class="d-block" style="margin-top: 1em;margin-bottom: 1em;" (click)="p1.close()">Close</button>
                                                      </ng-template>
                                                </h4>
                                                <p class="mb-0">{{'charts.No data saved' | translate }}
                                                    <span
                                                    *ngIf="rangeDate!=''">{{'charts.in the last' | translate }} 
                                                    <span *ngIf="rangeDate=='month'">{{'charts.month' |
                                                        translate }}</span>
                                                    <span *ngIf="rangeDate=='quarter'">{{'charts.quarter' |
                                                        translate }}</span>
                                                    <span *ngIf="rangeDate=='year'">{{'charts.year' | translate
                                                        }}</span></span></p>
                                            </div>
                                            <div class="col-2">
                                                <a routerLink="/feel" class="text-bold-500 float-right btn btn-primary btn-sm font-small-3 danger"
                                                title="{{'charts.I want to answer how I feel today' | translate }}">
                                                <span class="menu-title">+</span>
                                            </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="medications.length > 0 && loadedDrugs">
                        <div class="col-sm-12">
                            <div class="card mt-2 mb-2" #ContainerRef>
                                <div class="mb-2">
                                    <div class="card-block m-0">
                                        <div class="row p-2">
                                            <div class="col-8">
                                                <h4 class="text-bold-500 mb-0">{{'clinicalinfo.Medication' | translate }} 
                                                    <em class="ft-info font-medium-1" style="cursor: pointer;" placement="down" #p1="ngbPopover" [ngbPopover]="popContentdrugs" popoverTitle="{{'charts.infoTitle' | translate }}"></em>
                                                    <ng-template #popContentdrugs>
                                                        <span>
                                                            {{'charts.infoDrugs' | translate }}
                                                        </span>
                                                        <button class="d-block" style="margin-top: 1em;margin-bottom: 1em;" (click)="p1.close()">Close</button>
                                                      </ng-template>
                                                </h4>
                                                <span class="text-muted"> 
                                                    <label class="container pl-0">
                                                        <input type="checkbox" [(ngModel)]="normalized" (change)="normalizedChanged(normalized)">
                                                        <span class="checkmark"></span>
                                                      </label><span style="margin-left: 0.2rem !important;">{{titleDose}}</span>
                                                </span>
                                            </div>
                                            <div class="col-4">
                                                <a routerLink="/medication" class="text-bold-500 float-right btn btn-primary btn-sm font-small-3 danger"
                                                title="{{'homeraito.p7' | translate }}">
                                                <span class="menu-title">+</span>
                                            </a>
                                            </div>
                                        </div>
                                        <div >
                                            <div class="height-100">
                                              <ngx-charts-line-chart                                                
                                                  [scheme]="lineChartColorScheme"
                                                  [results]="lineChartDrugs" [gradient]="barChartGradient"
                                                  [xAxis]="false" [yAxis]="true" [yAxisTickFormatting]='axisFormat'
                                                  [legend]="false" [legendPosition]="'below'" [showXAxisLabel]="false"
                                                  [showYAxisLabel]="false" [xAxisLabel]="barChartXAxisLabel"
                                                  [yAxisLabel]="barChartYAxisLabel" [yAxisTicks]="yAxisTicksDrugs">
                                                  <!--[timeline]="true"-->
                                              </ngx-charts-line-chart>                                    
                                          </div>
                                          <div *ngIf="rangeDate=='month'" class="center-elements col-12">
                                              <span class="float-left font-small-3">{{xAxisTicks[0] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                              <span class="d-none d-sm-inline font-small-3">{{xAxisTicks[1] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                              <span class="float-right font-small-3">{{xAxisTicks[2] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                          </div>
                                          <div *ngIf="rangeDate!='month'" class="center-elements col-12">
                                              <span class="float-left font-small-3">{{xAxisTicks[0] | date: 'MMM y': '' : translate.currentLang}}</span>
                                              <span class="d-none d-sm-inline font-small-3">{{xAxisTicks[1] | date: 'MMM y': '' : translate.currentLang}}</span>
                                              <span class="float-right font-small-3">{{xAxisTicks[2] | date: 'MMM y': '' : translate.currentLang}}</span>
                                          </div>
                                          <ngx-charts-legend fxFlex="100%" 
                                                                class="chart-legend" 
                                                                [data]="chartNames" 
                                                                [title]="'Legend Title'" 
                                                                [colors]="colors">
                                              </ngx-charts-legend>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" *ngIf="medications.length == 0 && loadedDrugs">
                        <div class="col-sm-12">
                            <div class="card mb-2 mt-2">
                                <div class="">
                                    <div class="card-block">
                                        <div class="row p-2">
                                            <div class="col-10">
                                                <h4 class="text-bold-500 mb-0">{{'clinicalinfo.Medication' | translate }}
                                                    <em class="ft-info font-medium-1" style="cursor: pointer;" placement="down" #p1="ngbPopover" [ngbPopover]="popContentdrugs" popoverTitle="{{'charts.infoTitle' | translate }}"></em>
                                                    <ng-template #popContentdrugs>
                                                        <span>
                                                            {{'charts.infoDrugs' | translate }}
                                                        </span>
                                                        <button class="d-block" style="margin-top: 1em;margin-bottom: 1em;" (click)="p1.close()">Close</button>
                                                      </ng-template>
                                                </h4>
                                                <p class="mb-0">{{'charts.There is no drug data stored' | translate }} <span
                                                    *ngIf="rangeDate!=''">{{'charts.in the last' | translate }}
                                                    <span *ngIf="rangeDate=='month'">{{'charts.month' |
                                                        translate }}</span>
                                                    <span *ngIf="rangeDate=='quarter'">{{'charts.quarter' |
                                                        translate }}</span>
                                                    <span *ngIf="rangeDate=='year'">{{'charts.year' | translate
                                                        }}</span></span></p>
                                            </div>
                                            <div class="col-2">
                                                <a routerLink="/medication" class="text-bold-500 float-right btn btn-primary btn-sm font-small-3 danger"
                                                title="{{'homeraito.p7' | translate }}">
                                                <span class="menu-title">+</span>
                                            </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row"
                *ngIf="medications.length > 0 && loadedDrugs && events.length > 0 && loadedEvents">
                <div class="col-sm-12">
                    <div class="card mb-2 mt-2" #ContainerRef1 id="line-chart4">
                        <div class="mb-2">
                          <div class="card-block m-0">
                            <div class="row p-2">
                                    <div class="col-12">
                                        <h4 class="text-bold-500 mb-0">{{'charts.Drugs vs Seizures' | translate }}</h4>
                                        <span class="text-muted">
                                            <label class="container pl-0">
                                                <input type="checkbox" [(ngModel)]="normalized2" (change)="normalizedChanged2(normalized2)">
                                                <span class="checkmark"></span>
                                              </label><span style="margin-left: 0.2rem !important;">{{titleDrugsVsDrugs}}</span> 
                                        </span>
                                    </div>
                                </div>
                                <div>
                                  <div class="height-100">
                                    <div id="chartdoseAvgDrugs" style="max-height: 100px;" class="ct-chart"
                                        height="200px"></div>
                                        <combo-chart-component
                                        [view]="[(ContainerRef1.offsetWidth-90), 100]"
                                        [scheme]="comboBarScheme"
                                        [colorSchemeLine]="lineChartScheme"
                                        [results]="barChart"
                                        [animations]="animations"
                                        [lineChart]="lineChartSeries"
                                        [yAxisTickFormatting]="yLeftTickFormat"
                                        [yLeftAxisScaleFactor]="yLeftAxisScale"
                                        [yRightAxisScaleFactor]="yRightAxisScale"
                                        [yRightAxisTickFormatting]="yRightTickFormat"
                                        [gradient]="gradient"
                                        [xAxis]="showXAxis"
                                        [yAxis]="showYAxis"
                                        [legend]="false"
                                        [showGridLines]="showGridLines"
                                        [showXAxisLabel]="showXAxisLabel"
                                        [showYAxisLabel]="showYAxisLabel"
                                        [showRightYAxisLabel]="showYAxisLabel"
                                        [xAxisLabel]="false"
                                        [yAxisLabel]="yAxisLabel"
                                        [yAxisLabelRight]="yAxisLabelRight">
                                        </combo-chart-component>
                                       
                                </div>
                                <div *ngIf="rangeDate=='month'" class="center-elements col-12">
                                    <span class="float-left font-small-3">{{xAxisTicks[0] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                    <span class="d-none d-sm-inline font-small-3">{{xAxisTicks[1] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                    <span class="float-right font-small-3">{{xAxisTicks[2] | date: 'dd MMM': '' : translate.currentLang}}</span>
                                </div>
                                <div *ngIf="rangeDate!='month'" class="center-elements col-12">
                                    <span class="float-left font-small-3">{{xAxisTicks[0] | date: 'MMM y': '' : translate.currentLang}}</span>
                                    <span class="d-none d-sm-inline font-small-3">{{xAxisTicks[1] | date: 'MMM y': '' : translate.currentLang}}</span>
                                    <span class="float-right font-small-3">{{xAxisTicks[2] | date: 'MMM y': '' : translate.currentLang}}</span>
                                </div>
                                <ngx-charts-legend fxFlex="100%" 
                                                        class="chart-legend" 
                                                        [data]="chartNames" 
                                                        [title]="'Legend Title'" 
                                                        [colors]="colors2">
                                      </ngx-charts-legend>
                                      <div>
                                        <ngx-charts-legend fxFlex="100%" 
                                                          class="chart-legend" 
                                                          [data]="titleSeizuresLegend" 
                                                          [title]="'Legend Title'" 
                                                          [colors]="colors2">
                                        </ngx-charts-legend>
                                      </div>
                                      
                                </div>
                                
                            </div>

                        </div>
                    </div>
                </div>
            </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="mx-auto" style="max-width: 30rem !important;">
        <div>
            
        </div>
    </div>

</div>